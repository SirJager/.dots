#! /bin/bash
# You have to change this based on your monitor 
monitor=,1920x1080@60,0x0,1

# exec-once=xset r rate 250 50 &
exec-once=xsetroot -cursor_name left_ptr &

# Battery Watch
exec-once=~/.config/scripts/watch-battery &

# Wallpaper
exec-once=~/.config/hypr/scripts/wallpaper.sh -f /mnt/storage/wallpaper/nordic/135.png &

# Authentication Agent | sudo pacman -Syu polkit-kde-agent | polkit-gnome
exec-once=/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &
windowrule=float,polkit-gnome-authentication-agent-1

# Notification 
exec-once=dunst &


# Waybar | pamac build waybar-hyprland-git 
exec-once=waybar

# For screen sharing 
exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP &

# For keyboard 
#exec-once=fcitx5 -D

input {
  # Remap Capslock -> Esc for Vim users  
  # kb_options=caps:escape 
  repeat_rate=50
  repeat_delay=250
  follow_mouse = 0

  touchpad {
    tap-to-click=1
    natural_scroll=0
    disable_while_typing=1
    clickfinger_behavior=1
    middle_button_emulation=0
  }
}


gestures { 
  workspace_swipe=true 
  workspace_swipe_fingers=4
  workspace_swipe_min_speed_to_force=5
}

general {
    layout=dwindle # master, dwindle
    sensitivity=1.0 # for mouse cursor

    gaps_in=1
    gaps_out=1
    border_size=2
    col.inactive_border=0x66333333
    col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg

}

decoration {
    blur=1
    rounding=0
    blur_size=10 # minimum 1
    blur_passes=2 # minimum 1, more passes = more resource intensive.
    blur_new_optimizations = true   
    # Your blur "amount" is blur_size * blur_passes, but high blur_size (over around 5-ish) will produce artifacts.
    # if you want heavy blur, you need to up the blur_passes.
    # the more passes, the more you can up the blur_size without noticing artifacts.
    drop_shadow=false
    shadow_range=50
    shadow_render_power = 5
    col.shadow = rgba(1a1a1aee)
    col.shadow_inactive=0x50000000
}


animations {
    enabled=1
    bezier=overshot,0.13,0.99,0.29,1.1

    animation=fade,1,2,default
    animation=border,1,2,default
    animation=workspaces,1,3,overshot,slide

    animation=windowsIn,1,2,default,slide
    animation=windowsOut,1,2,default,slide

}

dwindle {
    pseudotile=1
    force_split=1
    preserve_split=1
    no_gaps_when_only=0
}

master {
  new_on_top=true
  no_gaps_when_only = true
}

misc {
  disable_hyprland_logo=true
  disable_splash_rendering=true
  mouse_move_enables_dpms=true
}

#* Float Necessary Windows
windowrule=float,Rofi
windowrule=float,pavucontrol

windowrule=float,title:^(all_is_kitty)$
windowrule=move center,title:^(fly_is_kitty)$
windowrule=size 800 500,title:^(fly_is_kitty)$
windowrule=animation slide,title:^(all_is_kitty)$

windowrulev2 = float,class:^()$,title:^(Picture in picture)$
windowrulev2 = float,class:^(brave)$,title:^(Save File)$
windowrulev2 = float,class:^(brave)$,title:^(Open File)$
windowrulev2 = float,class:^(LibreWolf)$,title:^(Picture-in-Picture)$
windowrulev2 = float,class:^(blueman-manager)$
windowrulev2 = float,class:^(org.twosheds.iwgtk)$
windowrulev2 = float,class:^(blueberry.py)$
windowrulev2 = float,class:^(xdg-desktop-portal-gtk)$
windowrulev2 = float,class:^(geeqie)$

#* Increase the opacity 
windowrule=opacity 0.8 overried 0.7, nautilus
windowrule=opacity 0.96,discord
windowrule=opacity 0.8 overrie 0.6, code
windowrule=opacity 0.88,obsidian
windowrule=opacity 0.7 overried 0.6 ,xfce4-terminal

^.*nvim.*$
windowrule=tile,librewolf
windowrule=tile,spotify
windowrule=opacity 0.85,neovim
bindm=SUPER,mouse:272,movewindow
bindm=SUPER,mouse:273,resizewindow




#? ---------[Window Manager]------------------------------------------------
# Exit Session / Close Hyprland
bind=SUPERALT,Q,exit,
# Lockscreen
bind=SUPER,ESCAPE,exec,$locking
#? -------------------------------------------------------------------------



#? ---------[System-Shutdown-Reboot]---------------------------------------
# bind=SUPERALT,H,exec, systemctl poweroff
# bind=SUPERALT,G,exec, systemctl reboot
#? -------------------------------------------------------------------------



#? ---------[Brightness]----------------------------------------------------
# pamac build brillo
bind=SUPER,KP_Add,exec,light -A 5 && light -O &
bind=SUPER,KP_Subtract,exec,light -U 5 && light -O &
# Default Keyboard Brightness buttons
bindle=,XF86MonBrightnessUp,exec,light -A 5 && light -O &
bindle=,XF86MonBrightnessDown,exec,light -U 5 && light -O &
#? -------------------------------------------------------------------------



#? ---------[Volumne]-------------------------------------------------------
# sudo pacman -Syu pamixer
bind=ALT,KP_Add,exec,~/.config/hypr/scripts/volume up
bind=ALT,KP_Subtract,exec,~/.config/hypr/scripts/volume down

# Defaults Keyboard Buttons
bind=,XF86AudioMute,exec,~/.config/hypr/scripts/volume mute
bind=,XF86AudioLowerVolume,exec,~/.config/hypr/scripts/volume down
bind=,XF86AudioRaiseVolume,exec,~/.config/hypr/scripts/volume up
bind=,XF86AudioMicMute,exec,pactl set-source-mute @DEFAULT_SOURCE@ toggle
#? -------------------------------------------------------------------------


#? ---------[Wallpaper]----------------------------------------------------
bind=SUPER,Q,exec,~/.scripts/change-wall -d /mnt/storage/wallpaper/nordic
bind=SUPER,R,exec,~/.scripts/change-wall -d /mnt/storage/wallpaper/gruvbox
#? ------------------------------------------------------------------------


#? ---------[Apps-Launcher]-----------------------------------------------
bind=SUPERSHIFT,C,exec,code ~/.config/jager/config.code-workspace
#? -----------------------------------------------------------------------


#? ---------[Apps-Launcher]-----------------------------------------------
#* Application Launcher
bind=ALT,SPACE,exec,~/.config/polybar/colorblocks/scripts/launcher.sh

bind=SUPER,V,exec,code
bind=SUPER,B,exec,brave
bind=SUPER,F,exec,firefox
bind=ALT,RETURN,exec,alacritty -e tmux attach
bind=ALTSHIFT,RETURN,exec,alacritty -e tmux
# bind=SUPER,RETURN,exec,xfce4-terminal
bind=SUPER,RETURN,exec,kitty
bind=SUPER,T,exec,telegram-desktop
bind=SUPER,C,exec,google-chrome-stable
bind=SUPER,E,exec,nautilus --new-window 
#? -----------------------------------------------------------------------



#? ---------[Scripts-Tools-Utils]-----------------------------------------
# Generate 16 digit random password
bind=SUPER,P,exec,tr -dc "a-zA-Z0-9_" < /dev/urandom | head -c 16 | xclip -selection clipboard
#? -----------------------------------------------------------------------


#? ---------[Workspace]----------------------------------------------------
bind=SUPER,W,killactive, # Close Active window

bind=SUPER,g,togglegroup
bind=SUPER,tab,changegroupactive 

bind=ALT,TAB,movefocus,l
bind=SUPERSHIFT,P,pseudo,
bind=SUPERSHIFT,KP_Divide,fullscreen,1,
bind=SUPERSHIFT,KP_Subtract,togglefloating,

# bind=SUPER,j,layoutmsg,cyclenext
# bind=SUPER,k,layoutmsg,cycleprev

bind=SUPER,j,movefocus,d
bind=SUPER,k,movefocus,u

bind=SUPER,h,movefocus,l
bind=SUPER,l,movefocus,r

bind=SUPER,left,resizeactive,-40 0
bind=SUPER,right,resizeactive,40 0

bind=SUPER,up,resizeactive,0 -40
bind=SUPER,down,resizeactive,0 40

bind=SUPERSHIFT,h,movewindow,l
bind=SUPERSHIFT,l,movewindow,r
bind=SUPERSHIFT,k,movewindow,u
bind=SUPERSHIFT,j,movewindow,d

# Switch workspaces with SUPER + [0-9]
bind=SUPER,1,workspace,1
bind=SUPER,2,workspace,2
bind=SUPER,3,workspace,3
bind=SUPER,4,workspace,4
bind=SUPER,5,workspace,5
bind=SUPER,6,workspace,6
bind=SUPER,7,workspace,7
bind=SUPER,8,workspace,8
bind=SUPER,9,workspace,9
bind=SUPER,0,workspace,10


# Move active window to a workspace with SUPER + SHIFT + [0-9]
bind=SUPERSHIFT,1,movetoworkspacesilent,1
bind=SUPERSHIFT,2,movetoworkspacesilent,2
bind=SUPERSHIFT,3,movetoworkspacesilent,3
bind=SUPERSHIFT,4,movetoworkspacesilent,4
bind=SUPERSHIFT,5,movetoworkspacesilent,5
bind=SUPERSHIFT,6,movetoworkspacesilent,6
bind=SUPERSHIFT,7,movetoworkspacesilent,7
bind=SUPERSHIFT,8,movetoworkspacesilent,8
bind=SUPERSHIFT,9,movetoworkspacesilent,9
bind=SUPERSHIFT,0,movetoworkspacesilent,10

# Scroll through existing workspaces with SUPER + scroll
bind = SUPER, mouse_down, workspace, e+1
bind = SUPER, mouse_up, workspace, e-1


#? ------------------------------------------------------------------------
